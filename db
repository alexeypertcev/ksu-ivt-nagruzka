CREATE DATABASE nagruzka CHARACTER SET utf8

PRAGMA foreign_keys = ON;

CREATE TABLE speciality (
name TEXT NOT NULL,
CONSTRAINT name PRIMARY KEY (name)
)

CREATE TABLE subject ( 
name TEXT NOT NULL,
CONSTRAINT name PRIMARY KEY (name)
)

CREATE TABLE students ( 
id INTEGER PRIMARY KEY AUTOINCREMENT, 
speciality_name TEXT NOT NULL, 
course INTEGER NOT NULL, 
group_ INTEGER NOT NULL, 
undergroup INTEGER NOT NULL, 
quantity INTEGER NOT NULL,
CONSTRAINT speciality_name FOREIGN KEY (speciality_name) 
  REFERENCES speciality (name)
)

CREATE TABLE status ( 
name TEXT NOT NULL, 
hours INTEGER NOT NULL,
CONSTRAINT name PRIMARY KEY (name)
)

CREATE TABLE teachers ( 
id INTEGER PRIMARY KEY AUTOINCREMENT,
f TEXT NOT NULL, 
i TEXT NOT NULL, 
o TEXT NOT NULL, 
status_name TEXT NOT NULL, 
rate REAL NOT NULL,
CONSTRAINT status_name FOREIGN KEY (status_name) 
  REFERENCES status (name)
) 

CREATE TABLE curriculum (
id INTEGER PRIMARY KEY AUTOINCREMENT,
speciality_name TEXT NOT NULL,
subject_name TEXT NOT NULL,
semmestr INTEGER NOT NULL,
lection_hr INTEGER,
labs_hr INTEGER,
practice_hr INTEGER,
KCP_hr INTEGER,
CONSTRAINT subject_name FOREIGN KEY (subject_name) 
  REFERENCES subject (name),
CONSTRAINT speciality_name FOREIGN KEY (speciality_name) 
  REFERENCES speciality (name)
)

CREATE TABLE subjects_in_semmestre (
id INTEGER PRIMARY KEY AUTOINCREMENT,
students_id INTEGER NOT NULL,
curriculum_id INTEGER NOT NULL,
CONSTRAINT students_id FOREIGN KEY (students_id) 
  REFERENCES students (id),
CONSTRAINT curriculum_id FOREIGN KEY (curriculum_id) 
  REFERENCES curriculum (id)
)

CREATE TABLE distribution (
id INTEGER PRIMARY KEY AUTOINCREMENT,
subjects_in_semmestre_id INTEGER NOT NULL,
teachers_id INTEGER NOT NULL,
CONSTRAINT subjects_in_semmestre_id FOREIGN KEY (subjects_in_semmestre_id) 
  REFERENCES subjects_in_semmestre (id),
CONSTRAINT teachers_id FOREIGN KEY (teachers_id) 
  REFERENCES teachers (id)
)
